<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Walkthrough: Build your own R Markdown Template • indiedown</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Walkthrough: Build your own R Markdown Template">
<script defer data-domain="indiedown.cynkra.com" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://cynkra.com" class="external-link"><img src="https://cynkra.com/assets/img/logo_small.svg" id="cynkra-logo-nav" alt="cynkra"></a>
    <a class="navbar-brand me-2" href="../index.html">indiedown</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9020</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/indiedown.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/customize.html">Customize Individual R Markdown Templates</a></li>
    <li><a class="dropdown-item" href="../articles/walkthrough.html">Walkthrough: Build your own R Markdown Template</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cynkra/indiedown/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Walkthrough: Build your own R Markdown Template</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cynkra/indiedown/blob/main/vignettes/walkthrough.Rmd" class="external-link"><code>vignettes/walkthrough.Rmd</code></a></small>
      <div class="d-none name"><code>walkthrough.Rmd</code></div>
    </div>

    
    
<p><code>vignette("intro")</code> has shown how to set up a package
skeleton with indiedown. This article teaches you how to apply
customizations to produce a template that fits your needs.</p>
<div class="section level2">
<h2 id="customization-points">Customization points<a class="anchor" aria-label="anchor" href="#customization-points"></a>
</h2>
<p>indiedown does not modify the default <code>.tex</code> template of
Pandoc. Instead, all modifications are applied on top of it. This should
make it compliant with future releases of Pandoc and R Markdown.</p>
<p>There are three possible customization points to customize an
indiedown skeleton:</p>
<ul>
<li><p>Set defaults (such as fonts or geometry) in the YAML header at
<code>inst/indiedown/default.yaml</code></p></li>
<li><p>Tweak LaTeX settings at
<code>inst/indiedown/preamble.tex</code></p></li>
<li><p>Apply dynamic adjustments in <code>pre_processor.R</code>
(advanced)</p></li>
</ul>
<p>For this tutorial, we will focus on the first two points only.</p>
</div>
<div class="section level2">
<h2 id="default-yaml">
<code>default.yaml</code><a class="anchor" aria-label="anchor" href="#default-yaml"></a>
</h2>
<p>Let’s have a look at <code>inst/indedown/default.yaml</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># indiedown: customize defaults in YAML header here</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">indent</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">compact-title</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">subparagraph</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co">  # needed for titlesec</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">papersize</span><span class="kw">:</span><span class="at"> a4</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">documentclass</span><span class="kw">:</span><span class="at"> article</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="fu">secnumdepth</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="fu">fontsize</span><span class="kw">:</span><span class="at"> </span><span class="st">"11pt"</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="fu">mainfont</span><span class="kw">:</span><span class="at"> regular.ttf</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="fu">mainfontoptions</span><span class="kw">:</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="kw">-</span><span class="at"> Path=&lt;&lt;indiedown_path&gt;&gt;/fonts/</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="kw">-</span><span class="at"> BoldFont=bold.ttf</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="kw">-</span><span class="at"> ItalicFont=italic.ttf</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="kw">-</span><span class="at"> BoldItalicFont=bolditalic.ttf</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="kw">-</span><span class="at"> Scale=0.92</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="fu">linestretch</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.05</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="fu">geometry</span><span class="kw">:</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="kw">-</span><span class="at"> top=2cm</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="kw">-</span><span class="at"> bottom=2cm</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="kw">-</span><span class="at"> left=2cm</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="kw">-</span><span class="at"> right=2cm</span></span></code></pre></div>
<p>These are simply defaults for the custom template. So rather than
adding these options to the YAML header of the <code>.Rmd</code> each
time, they can be stored centrally. You can overwrite these values in
the <code>.Rmd</code> file.</p>
<p>It is recommended to set as many customizations as possible as Pandoc
options, and fall back to LaTeX if this is not possible. A full list of
options is given in the <a href="https://pandoc.org/MANUAL.html#variables-for-latex" class="external-link">LaTeX section
of the Pandoc manual</a>.</p>
<p>In our case, we want to use slightly wider page margins, so we change
the geometry to:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">geometry</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="kw">-</span><span class="at"> top=2.5cm</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="kw">-</span><span class="at"> bottom=2.5cm</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="kw">-</span><span class="at"> left=3cm</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="kw">-</span><span class="at"> right=3cm</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="changing-fonts">Changing Fonts<a class="anchor" aria-label="anchor" href="#changing-fonts"></a>
</h2>
<p>Changing the font to fit your corporate style is usually the first
step in customization.</p>
<p>Note that <code>&lt;&lt;indiedown_path&gt;&gt;</code> will be
automatically substituted with the actual location of
<code>inst/indiedown</code>. That is why we can include <em>assets</em>
that are picked up by the template. The default template includes the
free Roboto font, which is located at <code>inst/indiedown</code>.</p>
<p>We could replace that with a proprietary font to match the corporate
design. Instead we use a helper function to get one of <a href="https://fonts.google.com" class="external-link">Google’s free fonts</a>.</p>
<p>use_indiedown_gfonts(id = “lato”)</p>
<p>The function relies on the <a href="https://CRAN.R-project.org/package=gfonts" class="external-link">gfonts</a> package to
download and install the <em>Lato</em> font. If you don’t know the ID of
a font, use <code><a href="https://dreamrs.github.io/gfonts/reference/get_all_fonts.html" class="external-link">gfonts::get_all_fonts()</a></code> to get a list of all
available fonts.</p>
<p>Let’s preview what we have by now:</p>
<p><img src="fig/status-1.png" style="width:70.0%"></p>
</div>
<div class="section level2">
<h2 id="preamble-tex">
<code>preamble.tex</code><a class="anchor" aria-label="anchor" href="#preamble-tex"></a>
</h2>
<p>Let’s turn to the second customization point,
<code>preamble.tex</code>. This contains LaTeX code that is run at the
beginning. Add everything here that cannot be changed in the
<code>default.yaml</code>. We want to use slightly bigger headers, and
change the <code>titlesec</code> line to:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode tex"><code class="sourceCode latex"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">\usepackage</span>[medium]{<span class="ex">titlesec</span>}</span></code></pre></div>
<p>As for <code>default.yaml</code>, it supports substitution of
<code>&lt;&lt;indiedown_path&gt;&gt;</code>, so you could link to images
here as well. Generally, you do not want do too many thing here. Note
that the default LaTeX title page is disabled in the default template,
for good reason:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode tex"><code class="sourceCode latex"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">\renewcommand\maketitle</span>{}</span></code></pre></div>
<p>Instead, we will build our own title page in R now.</p>
</div>
<div class="section level2">
<h2 id="a-customized-title-page-">A customized title page.<a class="anchor" aria-label="anchor" href="#a-customized-title-page-"></a>
</h2>
<p>One of the core principles of indiedown is to keep corporate design
elements as R code. That way, elements can be arranged flexibly and
adjusted to particular needs.</p>
<p>As a final step, we build a customized title page by modifying the
function definition of <code>R/cd_page_title</code>. The function writes
LaTeX code that will be added to the <code>.Rmd</code> when
<code>cd_page_title()</code> is called.</p>
<p>To make writing of LaTeX code in R easy, we rely on the raw string
feature that was added in R 4.0.0. It allows you to write pure LaTeX
code in R, without having to escape every <code>\</code> by a second
<code>\\</code>.</p>
<p>If you have to use a version of R that is older, the
<code>read_tex()</code> function offers an alternative way to write
unescaped LaTeX code. See <code>?read_tex</code>.</p>
<p>The <code>indiedown_glue()</code> helper function uses the <a href="https://CRAN.R-project.org/package=glue" class="external-link">glue</a> package to
substitute variables in the string. That way, variables such as
<code>title</code> or <code>subtitle</code> will be substituted in the
LaTeX code.</p>
<p>With <code>indiedown_path_tex()</code>, you can also refer to the
path of <code>inst/indiedown</code>, and use assets from the package. In
the example, we use this to include a logo. Now, we don’t want to use a
logo but rather a photograph of a beautiful parrot. We download the
image from <a href="https://unsplash.com/photos/gGC63oug3iY" class="external-link">unsplash.com</a> in
medium quality and store it in
<code>res/mikhail-vasilyev-gGC63oug3iY-unsplash.jpg</code>. Then, we
change the function definition as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cd_page_title</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">title</span> <span class="op">=</span> <span class="fu">default</span><span class="op">(</span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="va"><a href="https://pkgs.rstudio.com/rmarkdown/reference/metadata.html" class="external-link">metadata</a></span><span class="op">$</span><span class="va">title</span>, <span class="st">"Title"</span><span class="op">)</span>,</span>
<span>                          <span class="va">subtitle</span> <span class="op">=</span> <span class="fu">default</span><span class="op">(</span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="va"><a href="https://pkgs.rstudio.com/rmarkdown/reference/metadata.html" class="external-link">metadata</a></span><span class="op">$</span><span class="va">subtitle</span>, <span class="st">"Subtitle"</span><span class="op">)</span>,</span>
<span>                          <span class="va">date</span> <span class="op">=</span> <span class="fu">default</span><span class="op">(</span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="va"><a href="https://pkgs.rstudio.com/rmarkdown/reference/metadata.html" class="external-link">metadata</a></span><span class="op">$</span><span class="va">date</span>, <span class="fu">cd_format_date</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">img_path</span> <span class="op">&lt;-</span> <span class="fu">indiedown_path_tex</span><span class="op">(</span><span class="st">"res/mikhail-vasilyev-gGC63oug3iY-unsplash.jpg"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu">indiedown_glue</span><span class="op">(</span></span>
<span>    <span class="co"># R &gt;=4, raw strings allow to write LaTeX without escaping \ etc</span></span>
<span>    <span class="st">r"(</span></span>
<span><span class="st"></span></span>
<span><span class="st">\vspace*{-3cm}</span></span>
<span><span class="st"></span></span>
<span><span class="st">\begin{center}</span></span>
<span><span class="st">\makebox[\textwidth]{\includegraphics[width=\paperwidth]{&lt;&lt;img_path&gt;&gt;}}</span></span>
<span><span class="st">\end{center}</span></span>
<span><span class="st"></span></span>
<span><span class="st">\vspace*{2cm}</span></span>
<span><span class="st"></span></span>
<span><span class="st">\noindent \Huge &lt;&lt;title&gt;&gt;</span></span>
<span><span class="st"></span></span>
<span><span class="st">\noindent \huge &lt;&lt;subtitle&gt;&gt;</span></span>
<span><span class="st"></span></span>
<span><span class="st">\vspace*{2cm}</span></span>
<span><span class="st"></span></span>
<span><span class="st">\normalsize</span></span>
<span><span class="st"></span></span>
<span><span class="st">\noindent &lt;&lt;date&gt;&gt;</span></span>
<span><span class="st"></span></span>
<span><span class="st">\clearpage</span></span>
<span><span class="st">    )"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Of course, we could also pass an image path as an argument, so we can
choose a different title page in each report.</p>
<p>Building the package again, and running the template
<code>.Rmd</code>, we get:</p>
<p><img src="fig/status-2.png" style="width:30.0%"></p>
</div>
<div class="section level2">
<h2 id="where-to-go-from-here">Where to go from here<a class="anchor" aria-label="anchor" href="#where-to-go-from-here"></a>
</h2>
<p>indiedown provides a framework to easily generate customized R
Markdown templates. Templates can be customized by the full power of
Pandoc and LaTeX through various points of customization.</p>
<p>This walk-through introduced two of them. For more details and a
description of the third one, see
<code><a href="../articles/customize.html">vignette("customize")</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://cynkra.com/about/" class="external-link">Christoph Sax</a>, <a href="https://cynkra.com/about/" class="external-link">Kirill Müller</a>, <a href="https://cynkra.com/about/" class="external-link">Angelica Becerra</a>, Frederik Aust, cynkra GmbH.</p>
</div>

<div class="pkgdown-footer-right">
  <p>
Sponsored by <a href="https://cynkra.com" class="external-link"><img src="https://cynkra.com/assets/img/logo_small.svg" id="cynkra-logo-footer" alt="cynkra"></a>
</p>
</div>

    </footer>
</div>





  </body>
</html>
